<!DOCTYPE html>
<html>
<head>
  <title>Kundly.io Form (Free GeoNames Autocomplete)</title>
</head>
<body>
  <h2>Enter Your Birth Details</h2>
  <form id="kundlyForm">
    <label>Place of Birth:</label>
    <input type="text" id="placeInput" placeholder="Type city or district..." required>
    <ul id="suggestions"></ul>
    <input type="hidden" id="lat" name="lat">
    <input type="hidden" id="lng" name="lng">

    <button type="submit">Submit</button>
  </form>

  <script>
    const input = document.getElementById('placeInput');
    const suggestions = document.getElementById('suggestions');

    input.addEventListener('input', async () => {
      const query = input.value;
      if (query.length < 2) {
        suggestions.innerHTML = '';
        return;
      }

      const res = await fetch(`https://secure.geonames.org/searchJSON?q=${query}&maxRows=5&username=harshad1409`);
      const data = await res.json();

      suggestions.innerHTML = '';
      data.geonames.forEach(item => {
        const li = document.createElement('li');
        li.textContent = `${item.name}, ${item.countryName}`;
        li.onclick = () => {
          input.value = `${item.name}, ${item.countryName}`;
          document.getElementById('lat').value = item.lat;
          document.getElementById('lng').value = item.lng;
          suggestions.innerHTML = '';
        };
        suggestions.appendChild(li);
      });
    });
  </script>
</body>
</html>
